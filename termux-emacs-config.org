#+TITLE: Termux-specific Emacs configuration
#+PROPERTY: header-args :tangle termux-init.el :results silent

A few adjustments to Emacs on Android via the amazing Termux.

* Android web-browser                                                   :web:
Emacs knows only so many browsers, and termux's ~termux-open-url~
shortcut is not one of those. Let's use elisp's =advice= feature to
add a raw support for opening links outside Emacs.

#+BEGIN_SRC emacs-lisp
  (advice-add 'browse-url-default-browser :override
              (lambda (url &rest args)
                (start-process-shell-command "open-url" nil (concat "termux-open-url " url))))
#+END_SRC
* Magit-diff colors                                            :cosmetic:git:
Magit's diff color green seems a little subdued on Termux, and its red
is purple. This is because termux's 256 colors don't map well to the
RGB values defined in Magit. Fix those color issues

#+BEGIN_SRC emacs-lisp
  ; Colors when hunk is selected
  (set-face-attribute 'magit-diff-added-highlight nil  :background "color-28")
  (set-face-attribute 'magit-diff-removed-highlight nil  :background "color-88")
  ; Colors when hunk is not selected
  (set-face-attribute 'magit-diff-added nil  :background "color-71")
  (set-face-attribute 'magit-diff-removed nil  :background "color-124")
#+END_SRC
* Man directories                                                       :man:
By default the manual pages are searched in ~/usr~.
Fix this by adding the termux prefix path to  Woman manual page

#+BEGIN_SRC emacs-lisp :tangle no
(add-to-list 'woman-manpath "/data/data/com.termux/files/usr/share/man")
#+END_SRC
